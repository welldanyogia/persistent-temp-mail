# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# Logging Configuration
# Requirements: 14.3 - Application logs SHALL use structured JSON format
# Requirements: 14.4 - Application logs SHALL include correlation IDs for request tracing
# Requirements: 14.10 - System SHALL support log level configuration per environment
# Log level: debug, info, warn, error (default: info)
LOG_LEVEL=info
# Log format: json, text (default: json for production)
LOG_FORMAT=json
# Log output: stdout, stderr, or file path (default: stdout)
LOG_OUTPUT=stdout
# Add source file and line number to log entries (default: false)
LOG_ADD_SOURCE=false

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password_here
DB_NAME=persistent_temp_mail
DB_SSLMODE=disable

# JWT Configuration
# IMPORTANT: Generate secure random secrets for production
# Use: openssl rand -base64 32
JWT_ACCESS_SECRET=your_access_secret_here_min_32_chars
JWT_REFRESH_SECRET=your_refresh_secret_here_min_32_chars
JWT_ACCESS_EXPIRY=15
JWT_REFRESH_EXPIRY=10080
JWT_ISSUER=persistent-temp-mail

# Domain Configuration
DOMAIN_MAIL_SERVER=mail.webrana.id
DOMAIN_TXT_PREFIX=_tempmail-verification
DOMAIN_LIMIT=5
DOMAIN_SSL_ENABLED=false

# S3/MinIO Configuration for Attachment Storage
S3_ENDPOINT=localhost:9000
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_BUCKET=persistent-temp-mail-attachments
S3_USE_SSL=false
# Pre-signed URL expiration time in minutes (default: 15)
S3_PRESIGNED_URL_EXPIRY=15
# File size threshold in bytes for returning pre-signed URL instead of streaming (default: 10MB)
S3_LARGE_FILE_THRESHOLD=10485760
# Orphan cleanup job configuration
# Enable/disable orphan cleanup job (default: true)
S3_ORPHAN_CLEANUP_ENABLED=true
# Interval between cleanup runs in hours (default: 24)
S3_ORPHAN_CLEANUP_INTERVAL=24
# Age threshold for orphan files in hours (default: 168 = 7 days)
S3_ORPHAN_CLEANUP_AGE=168

# Alias Configuration
ALIAS_MAX_PER_USER=50

# SMTP Server Configuration
SMTP_PORT=25
SMTP_HOSTNAME=mail.webrana.id
SMTP_MAX_CONNECTIONS=100
SMTP_MAX_CONNECTIONS_PER_IP=5
SMTP_CONNECTION_TIMEOUT=5
SMTP_MAX_MESSAGE_SIZE=26214400
SMTP_MAX_RECIPIENTS=100
SMTP_RATE_LIMIT_PER_MINUTE=20
SMTP_TLS_ENABLED=true
SMTP_TLS_CERT_FILE=/etc/ssl/certs/smtp.crt
SMTP_TLS_KEY_FILE=/etc/ssl/private/smtp.key

# SSL Certificate Management Configuration
# Enable/disable SSL certificate management (default: false)
SSL_ENABLED=false

# Let's Encrypt Configuration
# Email for Let's Encrypt account registration (required if SSL_ENABLED=true)
LETSENCRYPT_EMAIL=admin@webrana.id
# Use Let's Encrypt staging environment for testing (default: false)
LETSENCRYPT_STAGING=false

# Cloudflare DNS Provider Configuration (for DNS-01 challenge)
# API token with Zone:DNS:Edit permissions
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here
# Optional: Cloudflare Zone ID
CLOUDFLARE_ZONE_ID=

# Certificate Storage Configuration
# Base path for certificate storage (default: /var/lib/tempmail/certs)
CERT_STORAGE_PATH=/var/lib/tempmail/certs
# 32-byte AES-256 encryption key as 64 hex characters
# Generate with: openssl rand -hex 32
CERT_ENCRYPTION_KEY=your_64_hex_character_encryption_key_here

# Certificate Renewal Configuration
# Days before expiry to start renewal (default: 30)
CERT_RENEWAL_DAYS=30
# How often to check for expiring certificates in hours (default: 24)
CERT_CHECK_INTERVAL=24
# Timeout for provisioning operations in minutes (default: 5)
CERT_PROVISION_TIMEOUT=5
# Max concurrent provisioning operations (default: 10)
CERT_MAX_CONCURRENT_PROVISION=10

# Redis Configuration (Optional)
# Requirements: 10.3 - Redis connectivity check in health endpoint
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
